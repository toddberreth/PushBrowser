!function(){String.prototype.trim||!function(){var a=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(a,"")}}(),Date.now||(Date.now=function(){return(new Date).getTime()}),Array.prototype.find||(Array.prototype.find=function(a){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof a)throw new TypeError("predicate must be a function");for(var b,c=Object(this),d=c.length>>>0,e=arguments[1],f=0;d>f;f++)if(b=c[f],a.call(e,b,f,c))return b;return void 0}),Array.prototype.forEach||(Array.prototype.forEach=function(a,b){var c,d;if(null==this)throw new TypeError(" this is null or not defined");var e=Object(this),f=e.length>>>0;if("function"!=typeof a)throw new TypeError(a+" is not a function");for(arguments.length>1&&(c=b),d=0;f>d;){var g;d in e&&(g=e[d],a.call(c,g,d,e)),d++}}),Array.prototype.filter||(Array.prototype.filter=function(a){"use strict";if(void 0===this||null===this)throw new TypeError;var b=Object(this),c=b.length>>>0;if(c>b.length||"function"!=typeof a)throw new TypeError;for(var d=[],e=arguments.length>=2?arguments[1]:void 0,f=0;c>f;f++)if(f in b){var g=b[f];a.call(e,g,f,b)&&d.push(g)}return d}),Array.prototype.some||(Array.prototype.some=function(a){"use strict";if(null==this)throw new TypeError("Array.prototype.some called on null or undefined");if("function"!=typeof a)throw new TypeError;for(var b=Object(this),c=b.length>>>0,d=arguments.length>=2?arguments[1]:void 0,e=0;c>e;e++)if(e in b&&a.call(d,b[e],e,b))return!0;return!1}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){var c;if(null==this)throw new TypeError('"this" is null or not defined');var d=Object(this),e=d.length>>>0;if(0===e)return-1;var f=+b||0;if(Math.abs(f)===1/0&&(f=0),f>=e)return-1;for(c=Math.max(f>=0?f:e-Math.abs(f),0);e>c;){if(c in d&&d[c]===a)return c;c++}return-1}),Array.prototype.map||(Array.prototype.map=function(a,b){var c,d,e;if(null==this)throw new TypeError(" this est null ou non dÃ©fini");var f=Object(this),g=f.length>>>0;if("function"!=typeof a)throw new TypeError(a+" n est pas une fonction");for(arguments.length>1&&(c=b),d=new Array(g),e=0;g>e;){var h,i;e in f&&(h=f[e],i=a.call(c,h,e,f),d[e]=i),e++}return d}),window.JSON||(window.JSON={parse:function(sJSON){return eval("("+sJSON+")")},stringify:function(){var a=Object.prototype.toString,b=Array.isArray||function(b){return"[object Array]"===a.call(b)},c={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},d=function(a){return c[a]||"\\u"+(a.charCodeAt(0)+65536).toString(16).substr(1)},e=/[\\"\u0000-\u001F\u2028\u2029]/g;return function f(c){if(null==c)return"null";if("number"==typeof c)return isFinite(c)?c.toString():"null";if("boolean"==typeof c)return c.toString();if("object"==typeof c){if("function"==typeof c.toJSON)return f(c.toJSON());if(b(c)){for(var g="[",h=0;h<c.length;h++)g+=(h?", ":"")+f(c[h]);return g+"]"}if("[object Object]"===a.call(c)){var i=[];for(var j in c)c.hasOwnProperty(j)&&i.push(f(j)+": "+f(c[j]));return"{"+i.join(", ")+"}"}}return'"'+c.toString().replace(e,d)+'"'}}()});try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b=function(){function a(){}return a.isURL=function(b){return"string"==typeof b&&a.PATTERN_URL.test(b)},a.isURLMacro=function(b){return"string"==typeof b&&a.PATTERN_URL_MACRO.test(b)},a.pad=function(a,b){void 0===b&&(b="00");var c=String(a);return b.substring(0,b.length-c.length)+c},a.seconds=function(a){if(!a)return NaN;var b=a.split("."),c=b[0].split(":"),d=3600*Number(c[0])+60*Number(c[1])+Number(c[2]);return 2===b.length&&(d=Number(d+"."+b[1])),d},a.offset=function(b){void 0===b&&(b=0);var c=b?Math.floor(b/3600):0;b-=3600*c;var d=b?Math.floor(b/60):0;b-=60*d;var e=(b%1).toFixed(3).substr(1);return b=Math.floor(b),a.pad(c)+":"+a.pad(d)+":"+a.pad(b)+e},a.hasFlash=function(){var a="Shockwave",b="Flash";try{a=new ActiveXObject(a+b+"."+a+b)}catch(c){a=navigator.plugins[a+" "+b]}return!!a},a.ucfirst=function(a){return a.charAt(0).toUpperCase()+a.substr(1)},a.getCookie=function(a){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},a.getAudioContext=function(){return window.AudioContext||window.webkitAudioContext},a.rand=function(a,b){void 0===b&&(b=!0);for(var c=b?"0123456789":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",d="",e=0;a>e;e++)d+=c.charAt(Math.floor(Math.random()*c.length));return d},a.PATTERN_URL=/^\(?((?:(http|https|ftp):\/\/)|\/\/)?(?:((?:[^\W\s]|\.|-|[:]{1})+)@{1})?((?:www.)?(?:[^\W\s]|\.|-)+[\.][^\W\s]{2,4}|localhost(?=\/)|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})(?::(\d*))?([\/]?[^\s\?]*[\/]{1})*(?:\/?([^\s\n\?\[\]\{\}\#]*(?:(?=\.)){1}|[^\s\n\?\[\]\{\}\.\#]*)?([\.]{1}[^\s\?\#]*)?)?(?:\?{1}([^\s\n\#\[\]]*))?([\#][^\s\n]*)?\)?$/i,a.PATTERN_URL_MACRO=/^\(?((?:(http|https|ftp):\/\/)|\/\/)?(?:((?:[^\W\s]|\.|-|[:]{1})+)@{1})?((?:www.)?(?:[^\W\s]|\.|-)+[\.][^\W\s]{2,4}|localhost(?=\/)|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})(?::(\d*))?([\/]?[^\s\?]*[\/]{1})*(?:\/?([^\s\n\?\[\]\{\}\#]*(?:(?=\.)){1}|[^\s\n\?\[\]\{\}\.\#]*)?([\.]{1}[^\s\?\#]*)?)?(?:\?{1}([^\s\n\#]*))?([\#][^\s\n]*)?\)?$/i,a}();a.Utils=b}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){!function(a){a[a.ANDROID=0]="ANDROID",a[a.WEBOS=1]="WEBOS",a[a.IPHONE=2]="IPHONE",a[a.IPAD=3]="IPAD",a[a.IPOD=4]="IPOD",a[a.BLACKBERRY=5]="BLACKBERRY",a[a.WINDOWS_PHONE=6]="WINDOWS_PHONE",a[a.ALL=7]="ALL"}(a.MobileName||(a.MobileName={}));var b=(a.MobileName,function(){function a(){}return a.isMobile=function(b){void 0===b&&(b=7);var c=/Android|webOS|iPhone|iPad|iPod|Blackberry|Windows Phone/i;switch(b){case 0:c=/Android/i;break;case 1:c=/webOS/i;break;case 2:c=/iPhone/i;break;case 3:c=/iPad/i;break;case 4:c=/iPod/i;break;case 5:c=/Blackberry/i;break;case 6:c=/Windows Phone/i}return c.test(a.userAgent)},a.isChromeIos=function(){return/CriOS/i.test(a.userAgent)},a.isFacebookWebview=function(){return/FBAN|FBIOS|FBAV|FBBV|FBDV|FBMD|FBSN|FBSV|FBSS|FBCR|FBID|FBLC|FBOP/i.test(a.userAgent)},a.isAndroidNative=function(){return a.userAgent.indexOf("Mozilla/5.0")>-1&&a.userAgent.indexOf("Android ")>-1&&a.userAgent.indexOf("AppleWebKit")>-1&&!(a.userAgent.indexOf("Chrome")>-1)},a.isAndroid=function(){return/Android/i.test(a.userAgent)},a.isAndroidMobile=function(){return a.isAndroid()&&/(m|M)obile/i.test(a.userAgent)},a.isOldIE=function(b){void 0===b&&(b=9);var c=new RegExp("MSIE [2-"+b+"]{1}");return c.test(a.userAgent)},a.isIE=function(){return/MSIE|Trident/.test(a.userAgent)},a.getAndroidVersion=function(){for(var b=a.userAgent.match(/Android\s.+\d;/gi)||[""],c=b[0].replace(/(Android\s|\.|;)/gi,"");c.length<3;)c+="0";return parseInt(c,10)},a.getIosVersion=function(){return parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(a.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||0},a.userAgent=navigator.userAgent,a}());a.Context=b}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b=function(){function a(){}return a.createXmlHttpRequest=function(){var a=null;if(window.XMLHttpRequest&&(a=new XMLHttpRequest),!a||"withCredentials"in a||(a=window.XDomainRequest?new XDomainRequest:null),!a){try{a=new ActiveXObject("MSXML2.XMLHTTP.6.0")}catch(b){try{a=new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(b){throw new Error("could not create XMLHttpRequest nor ActiveXObject")}}a.responseType="msxml-document"}return a},a}();a.Request=b}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b=function(){function b(){}return b.logEntries=function(c,d){if(b.enable){var e={level:c.level||"LOG",event:c},f=a.Request.createXmlHttpRequest();f.open("POST","//js.logentries.com/v1/logs/"+(d||b.leTokenDefault),!0),f.setRequestHeader("X-Requested-With","XMLHttpRequest"),f.setRequestHeader("Content-type","text/json");try{f.send(JSON.stringify(e,this.leStringify()))}catch(g){}}},b.soizenBench=function(c){if(b.enable){var d=a.Request.createXmlHttpRequest();d.open("POST","//canvasplayerbench.soizen.ovh/putData",!0),d.setRequestHeader("Content-Type","application/json; charset=UTF-8");try{d.send(JSON.stringify([c]))}catch(e){}}},b.leStringify=function(){var a=[];return function(b,c){var d=function(a,b){for(var c=0;c<a.length;c++)if(b===a[c])return c;return-1};if("undefined"==typeof c)return"undefined";if("object"==typeof c&&null!==c){if(-1!==d(a,c))return"<?>";a.push(c)}return c}},b.enable=!1,b.leTokenDefault="d40bc083-b332-47b4-976a-481365daf695",b}();a.LogSender=b}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){function b(){var b=a.Utils.getCookie("teadsDebugLevel");b&&(d=b.split(","),d.indexOf("all")>=0&&(d=["debug","info","warn","error"]));var f=a.Utils.getCookie("teadsDebugNamespace");f&&(e=f.split(",")),d.length&&!a.Logger&&(a.Context.isIE()?(c.log("Teads Media Framework > Debug mode"),c.log("Package: teads-player v0.2.48")):(c.log("%cTeads Media Framework %c> Debug mode","color:#7ebde5;font-family:Helvetica,sans-serif;font-size:2em;","color:#aaa;font-family:Helvetica,sans-serif;font-size:2em;"),c.log("%cPackage: teads-player v0.2.48","color:#7ebde5;font-style:italic;")))}a.START_TIME=a.START_TIME||Date.now();var c,d=[],e=[],f=function(){function a(){}return a.prototype.log=function(){},a}();c=window.console&&console.log?window.console:new f,b();var g=function(){function f(a){this.namespace=a,this.console=c}return f.prototype._log=function(f,g){var h=this;if(b(),g.length&&!(d.indexOf(f)<0)){if(e.length){var i=e.some(function(a){return 0===h.namespace.indexOf(a)});if(!i)return}var j=Date.now()-a.START_TIME,k=(j/1e3).toFixed(3)+"s";a.Context.isIE()?g=[k+" ["+this.namespace+"] "+g.join(" ")]:g.unshift("%c"+k+" "+this.namespace,"color:#7ebde5;");var l=c[f]||c.log;try{l.apply(c,g)}catch(m){Function.prototype.apply.apply(l,[c,g])}}},f.prototype.debug=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];this._log("debug",a)},f.prototype.info=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];this._log("info",a)},f.prototype.warn=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];this._log("warn",a)},f.prototype.error=function(){for(var b=[],c=0;c<arguments.length;c++)b[c-0]=arguments[c];this._log("error",b),a.LogSender.enable=!0,a.LogSender.logEntries({level:"ERROR",error:b})},f.prototype.table=function(a){c.table&&c.table(a)},f}();a.Logger=g}(teads||(teads={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b=function(){function a(a,b){this.code=a,this.error=b}return a.prototype.getMessage=function(){return"Error #"+this.code.id+": "+this.code.message},a.prototype.getId=function(){return this.code.id},a.prototype.getStackTrace=function(){return this.error&&this.error.stack?this.error.stack:""},a}();a.Exception=b;var c=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.XML_PARSE={id:100,message:"XML parsing error"},b.XML_INVALID_SCHEMA={id:101,message:'VAST schema validation error: expected "%s" but found "%s"'},b.UNSUPPORTED_VERSION={id:102,message:"VAST version of response not supported. Expected VAST2 or VAST3 but VAST1 found"},b.TRAFFICKING={id:200,message:"Trafficking error. Video player received an Ad type that it was not expecting and/or cannot display"},b.LINEARITY={id:201,message:"Video player expecting different linearity"},b.DURATION={id:202,message:"Video player expecting different duration"},b.SIZE={id:203,message:"Video player expecting different size"},b.WRAPPER={id:300,message:"General Wrapper error"},b.WRAPPER_TIMEOUT={id:301,message:"Timeout of VAST URI provided in Wrapper element, or of VAST URI provided in a subsequent Wrapper element (URI was either unavailable or reached a timeout as defined by the video player)"},b.WRAPPER_LIMIT={id:302,message:"Wrapper limit reached, as defined by the video player. Too many Wrapper responses have been received with no InLine response"},b.NO_ADS={id:303,message:"No Ads VAST response after one or more Wrappers"},b.NO_MEDIAFILE={id:304,message:"No Mediafile found in VAST file"},b.GENERAL_LINEAR={id:400,message:"General Linear error. Video player is unable to display the Linear Ad."},b.FILE_NOT_FOUND={id:401,message:"File not found. Unable to find Linear/MediaFile from URI."},b.MEDIAFILE_TIMEOUT={id:402,message:"Timeout of MediaFile URI."},b.UNSUPPORTED_MEDIAFILE={id:403,message:"Could not find MediaFile that is supported by this video player, based on the attributes of the MediaFile element."},b.MEDIAFILE_DISPLAY={id:405,message:"Problem displaying MediaFile. Video player found a MediaFile with supported type but could not display it. MediaFile may include: unsupported codecs, different MIME type than MediaFile@type, unsupported delivery method, etc."},b.GENERAL_NONLINEAR={id:500,message:"General NonLinearAds error."},b.CREATIVE_DIMENSIONS={id:501,message:"Unable to display NonLinear Ad because creative dimensions do not align with creative display area (i.e. creative dimension too large)."},b.NONLINEAR_FETCH={id:502,message:"Unable to fetch NonLinearAds/NonLinear resource."},b.SUPPORTED_NONLINEAR_NOT_FOUND={id:503,message:"Could not find NonLinear resource with supported type."},b.GENERAL_COMPANION={id:600,message:"General CompanionAds error."},b.COMPANION_DIMENSIONS={id:601,message:"Unable to display Companion because creative dimensions do not fit within Companion display area (i.e., no available space)."},b.COMPANION_DISPLAY={id:602,message:"Unable to display Required Companion."},b.COMPANION_FETCH={id:603,message:"Unable to fetch CompanionAds/Companion resource."},b.SUPPORTED_COMPANION_NOT_FOUND={id:604,message:"Could not find Companion resource with supported type."},b.UNDEFINED={id:900,message:"Undefined Error"},b.GENERAL={id:901,message:"General VPAID error"},b}(b);a.VastException=c}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(a){var b=function(){function a(){this.error=[],this.click=[],this.pause=[],this.resume=[],this.skip=[],this.creativeView=[],this.start=[],this.firstQuartile=[],this.midpoint=[],this.thirdQuartile=[],this.complete=[],this.impression=[],this.close=[],this.progress=[],this.mute=[],this.unmute=[],this.rewind=[],this.fullscreen=[],this.exitFullscreen=[],this.expand=[],this.collapse=[],this.acceptInvitationLinear=[],this.acceptInvitation=[],this.closeLinear=[],this.noAd=[],this.noLinearAd=[],this.customClicks=[]}return a}();a.TrackingDefinition=b}(b=a.vast||(a.vast={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(a){var b=function(){function a(){}return a.getXMLDoc=function(a){var b;if(window.DOMParser){var c=new DOMParser;b=c.parseFromString(a,"text/xml")}else b=new ActiveXObject("Msxml2.DOMDocument.3.0"),b.async=!1,b.loadXML(a);return b},a.getNodeContent=function(b){if(b)try{var c=a.getFirstChild(b);return c?a.getNodeTextContent(c):""}catch(d){}},a.getAttributeValue=function(a,b){try{if(a.attributes[b])return String(a.attributes[b].value);for(var c=0;c<a.attributes.length;c++)if(a.attributes[c].name===b)return String(a.attributes[c].value)}catch(d){}},a.isAllWhitespace=function(a){return!/[^\t\n\r ]/.test(a.textContent?a.textContent:a.text)},a.isIgnorable=function(b){return 8===b.nodeType||3===b.nodeType&&a.isAllWhitespace(b)},a.getFirstChild=function(b){for(var c=b.firstChild;c;){if(!a.isIgnorable(c))return c;c=c.nextSibling}return null},a.getNodeTextContent=function(a){var b=a.textContent?a.textContent:a.text,c=b.replace(/[\t\n\r ]+/g," ");return" "===c.charAt(0)&&(c=c.substring(1,c.length))," "===c.charAt(c.length-1)&&(c=c.substring(0,c.length-1)),c},a}();a.XMLHelper=b}(b=a.vast||(a.vast={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(a){var b=function(){function b(){this.version=2,this.tracking=new a.TrackingDefinition,this.clickThrough=[],this.mediaFiles=[],this.title="",this.wrappers=[],this.skippable=!1,this.skipDelay=0,this.extensions=[]}return b.prototype.merge=function(a){this.version<a.version&&(this.version=a.version),!this.title&&a.title&&(this.title=a.title),!this.adSystem&&a.adSystem&&(this.adSystem=a.adSystem),!this.id&&a.id&&(this.id=a.id),!this.duration&&a.duration&&(this.duration=a.duration),!this.adParameters&&a.adParameters&&(this.adParameters=a.adParameters),a.adTagUri&&this.wrappers.push(a.adTagUri);var b,c;for(var d in a.tracking)for(b=0,c=a.tracking[d].length;c>b;b++)this.tracking[d].push(a.tracking[d][b]);for(b=0,c=a.mediaFiles.length;c>b;b++)this.mediaFiles.push(a.mediaFiles[b]);for(b=0,c=a.clickThrough.length;c>b;b++)this.clickThrough.push(a.clickThrough[b]);for(b=0,c=a.extensions.length;c>b;b++)this.extensions.push(a.extensions[b]);!this.skippable&&a.skippable&&(this.skippable=!0,this.skipDelay=a.skipDelay)},b}();a.LinearAd=b}(b=a.vast||(a.vast={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(b){var c=function(){function b(){}return b.execCallback=function(c,d,e){try{c.apply(c,d)}catch(f){var g=new a.Logger("Callback"),h="user callback threw an exception: "+f;if(g.error(h,f,c,d),e){var i=a.VastException.UNDEFINED;i.message=h,b.execCallback(e,[new a.VastException(i,f)])}}},b}();b.CallbackHelper=c}(b=a.vast||(a.vast={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(b){var c=function(){function c(){}return c.parse=function(c,d,e){try{var f=b.XMLHelper.getXMLDoc(c),g=f.documentElement;if(!g)return b.CallbackHelper.execCallback(e,[new a.VastException(a.VastException.NO_ADS)]);var h=g.getElementsByTagName("Ad")[0];if(!h)return b.CallbackHelper.execCallback(e,[new a.VastException(a.VastException.NO_ADS)]);var i=new b.LinearAd;if(i.version=Number(b.XMLHelper.getAttributeValue(g,"version")),i.version<2)return b.CallbackHelper.execCallback(e,[new a.VastException(a.VastException.UNSUPPORTED_VERSION)]);var j=!!h.getElementsByTagName("Wrapper").length,k=h.getElementsByTagName("Linear")[0];if(!j&&!k)return b.CallbackHelper.execCallback(e,[new a.VastException(a.VastException.LINEARITY)]);i.id=b.XMLHelper.getAttributeValue(h,"id"),i.adTagUri=b.XMLHelper.getNodeContent(h.getElementsByTagName("VASTAdTagURI")[0]),i.title=b.XMLHelper.getNodeContent(h.getElementsByTagName("AdTitle")[0]),i.adSystem=b.XMLHelper.getNodeContent(h.getElementsByTagName("AdSystem")[0]);for(var l=h.getElementsByTagName("ClickThrough"),m=0,n=l.length;n>m;m++)i.clickThrough.push(b.XMLHelper.getNodeContent(l[m]));for(var o=h.getElementsByTagName("Impression"),m=0,n=o.length;n>m;m++)i.tracking.impression.push({url:b.XMLHelper.getNodeContent(o[m]),data:null});var p=h.getElementsByTagName("ClickTracking");for(m=0,n=p.length;n>m;m++)i.tracking.click.push({url:b.XMLHelper.getNodeContent(p[m]),data:null});var q=h.getElementsByTagName("Error");for(m=0,n=q.length;n>m;m++)i.tracking.error.push({url:b.XMLHelper.getNodeContent(q[m]),data:null});if(k){var r=a.Utils.seconds(b.XMLHelper.getAttributeValue(k,"skipoffset"));i.skippable=!isNaN(r),i.skipDelay=r||0,i.duration=a.Utils.seconds(b.XMLHelper.getNodeContent(k.getElementsByTagName("Duration")[0])),i.adParameters=b.XMLHelper.getNodeContent(k.getElementsByTagName("AdParameters")[0]);var s=k.getElementsByTagName("Tracking");for(m=0,n=s.length;n>m;m++){var t=b.XMLHelper.getAttributeValue(s[m],"event");if(i.tracking.hasOwnProperty(t)){var u=null;if("progress"===t)if(u=b.XMLHelper.getAttributeValue(s[m],"offset"),u.indexOf(":")>0)u=a.Utils.seconds(u);else{var v=u.trim().match(/^([0-9\.]+)%$/);if(!v)return b.CallbackHelper.execCallback(e,[new a.VastException(a.VastException.UNDEFINED,new Error("Wrong offset for progress tracking: "+u))]);u=i.duration*v[1]/100}i.tracking[t].push({url:b.XMLHelper.getNodeContent(s[m]),data:u})}}var w=k.getElementsByTagName("MediaFile");for(m=0,n=w.length;n>m;m++){var x=w[m];i.mediaFiles.push({type:b.XMLHelper.getAttributeValue(x,"type"),url:b.XMLHelper.getNodeContent(x),width:Number(b.XMLHelper.getAttributeValue(x,"width")),height:Number(b.XMLHelper.getAttributeValue(x,"height")),delivery:b.XMLHelper.getAttributeValue(x,"delivery"),bitrate:Number(b.XMLHelper.getAttributeValue(x,"bitrate")),api:b.XMLHelper.getAttributeValue(x,"apiFramework"),scalable:!!b.XMLHelper.getAttributeValue(x,"scalable"),id:b.XMLHelper.getAttributeValue(x,"id"),minBitrate:Number(b.XMLHelper.getAttributeValue(x,"minBitrate")),maxBitrate:Number(b.XMLHelper.getAttributeValue(x,"maxBitrate")),maintainAspectRatio:!!b.XMLHelper.getAttributeValue(x,"maintainAspectRatio"),codec:b.XMLHelper.getAttributeValue(x,"codec")})}}var y=h.getElementsByTagName("Extension");for(m=0,n=y.length;n>m;m++)i.extensions.push({type:b.XMLHelper.getAttributeValue(y[m],"type"),content:b.XMLHelper.getNodeContent(y[m])});b.CallbackHelper.execCallback(d,[i],e)}catch(z){b.CallbackHelper.execCallback(e,[new a.VastException(a.VastException.XML_PARSE,z)])}},c}();b.VASTParser=c}(b=a.vast||(a.vast={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(a){a.asset={corsswf:"cors.swf"}}(b=a.vast||(a.vast={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(b){var c=function(){function c(){}return c.load=function(d,e,f,g){var h=this;d=c.updateUrlPlaceholder(d),this.logger.info("Loading VAST file URL:",d);var i=function(){if(h.logger.warn("load file with javascript failed"),a.Utils.hasFlash())c.loadWithFlash(d,e,f,g);else{var i="Could not load with SWF proxy, no flash plugin installed",j=a.VastException.UNDEFINED;j.message=i,h.logger.error(i),b.CallbackHelper.execCallback(g,[new a.VastException(j)])}};try{var j=a.Request.createXmlHttpRequest();j.open("GET",d,!0);var k=function(){k=function(){};var a;if("string"==typeof j.responseXML)a=j.responseXML;else if("string"==typeof j.responseText)a=j.responseText;else{if("string"!=typeof j.response)return void i();a=j.response}f(a.trim())};j instanceof XMLHttpRequest?j.onreadystatechange=function(){if(4===j.readyState){if(j.status<200||j.status>=400)return h.logger.warn("server return an invalid status code "+j.status),i();k()}}:(j.onerror=i,j.ontimeout=i,j.onprogress=function(){},j.timeout=5e3,j.onload=k),j.send()}catch(l){this.logger.warn("Could not load XML file directly",l),this.logger.info("Retrying with a SWF helper in case there are just CORS headers missing"),i()}},c.loadWithFlash=function(c,d,e,f){var g=this,h="vastloader_"+Date.now()+"_"+Math.round(1e3*Math.random());this.logger.info("try loading file with flash cors proxy",h),window[h]=function(d,i){d?(g.logger.info("Flash CORS proxy successfully load VAST file",c),b.CallbackHelper.execCallback(e,[decodeURIComponent(i).trim()],f)):(g.logger.error("Unable to load VAST file with flash CORS proxy"),b.CallbackHelper.execCallback(f,[new a.VastException(a.VastException.WRAPPER_TIMEOUT)])),window[h]=void 0};var i=d.assetsUrl+"/"+b.asset.corsswf,j=document.createElement("div");j.innerHTML='<object id="'+h+'" name="'+h+'" data="'+i+'" type="application/x-shockwave-flash" width="0" height="0"><param name="allowScriptAccess" value="always"/><param name="movie" value="'+i+'"/><param name="flashvars" value="url='+encodeURIComponent(c)+"&handler="+h+'"/></object>',document.body.appendChild(j)},c.updateUrlPlaceholder=function(b){return b.replace(/\[timestamp\]/gi,String(Date.now())).replace(/\[(random|cachebusting|random_number)\]/gi,a.Utils.rand(8))},c.logger=new a.Logger("vast.VASTLoader"),c}();b.VASTLoader=c}(b=a.vast||(a.vast={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(b){var c=function(){function c(c){this.config=c,this.logger=new a.Logger("vast.VASTLib"),this.definition=new b.LinearAd,this.logger.info("new",this)}return c.prototype.load=function(a,c,d){var e=this;b.VASTLoader.load(a,this.config,function(a){e.parse(a,c,d)},function(a){e.logger.error("Could not load XML file",a),b.CallbackHelper.execCallback(d,[a])})},c.prototype.parse=function(c,d,e){var f=this;b.VASTParser.parse(c,function(c){try{f.definition.merge(c),c.adTagUri?f.load(c.adTagUri,d,e):0===c.mediaFiles.length?(f.logger.error("No media files found"),b.CallbackHelper.execCallback(e,[new a.VastException(a.VastException.NO_MEDIAFILE)])):b.CallbackHelper.execCallback(d,[f.definition],e)}catch(g){f.logger.error("Could not parse XML string",g),b.CallbackHelper.execCallback(e,[new a.VastException(a.VastException.UNDEFINED,g)])}},e)},c.prototype.parseJSON=function(a,b,c){this.logger.error("JSON parser is not implemented yet")},c}();b.VASTLib=c}(b=a.vast||(a.vast={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(a){var b=function(){function a(a,b){void 0===b&&(b=null),this.type=a,this.data=b}return a.AdLoaded="AdLoaded",a.AdStarted="AdStarted",a.AdStopped="AdStopped",a.AdSkipped="AdSkipped",a.AdLinearChange="AdLinearChange",a.AdSizeChange="AdSizeChange",a.AdExpandedChange="AdExpandedChange",a.AdSkippableStateChange="AdSkippableStateChange",a.AdRemainingTimeChange="AdRemainingTimeChange",a.AdDurationChange="AdDurationChange",a.AdVolumeChange="AdVolumeChange",a.AdImpression="AdImpression",a.AdVideoStart="AdVideoStart",a.AdVideoFirstQuartile="AdVideoFirstQuartile",a.AdVideoMidpoint="AdVideoMidpoint",a.AdVideoThirdQuartile="AdVideoThirdQuartile",a.AdVideoComplete="AdVideoComplete",a.AdClickThru="AdClickThru",a.AdInteraction="AdInteraction",a.AdUserAcceptInvitation="AdUserAcceptInvitation",a.AdUserMinimize="AdUserMinimize",a.AdUserClose="AdUserClose",a.AdPaused="AdPaused",a.AdPlaying="AdPlaying",a.AdLog="AdLog",a.AdError="AdError",a}();a.VPAIDEvent=b}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(a){!function(a){a[a.UNLOADED=-1]="UNLOADED",a[a.READY=0]="READY",a[a.LOADING=1]="LOADING",a[a.LOADED=2]="LOADED"}(a.LoaderStatus||(a.LoaderStatus={}));a.LoaderStatus}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(a){var b=function(){function b(b,c){this.container=b,this.config=c,this.loadTimeout=5e3,this.id=c.id||a.genRandomString(20)}return b.prototype.destroy=function(){try{!this.isDetroyed&&this.creativeContainer?(this.isDetroyed=!0,this.creativeContainer.parentNode.removeChild(this.creativeContainer),this.creativeContainer=null,this.vpaid=null):this.isDetroyed&&a.log("Cannot call destroy twice !")}catch(b){a.log("unable to remove VPAID creative container "+b)}},b.prototype.getVPAID=function(){return this.vpaid},b}();a.BaseVPAIDContainer=b}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(a){var b=function(b){function c(){b.apply(this,arguments)}return __extends(c,b),c.prototype.loadVpaid=function(a,b,c){var d=this;this.creativeContainer=document.createElement("iframe"),this.creativeContainer.id="vpaid-"+this.id,this.creativeContainer.style.margin="0px",this.creativeContainer.style.padding="0px",this.creativeContainer.style.width="100%",this.creativeContainer.style.height="100%",this.creativeContainer.style.border="0px",this.creativeContainer.style.overflow="hidden",this.container.appendChild(this.creativeContainer);var e=!0,f=function(a){e&&(e=!1,c(a))};this.callbackName="vpaidjsload_"+this.id,window[this.callbackName]=function(c){if(window[d.callbackName]=function(){},c)try{return d.creativeContainer=document.getElementById("vpaid-"+d.id),d.vpaid=d.creativeContainer.contentWindow.getVPAIDAd(),e=!1,void b(d.vpaid)}catch(g){f("VPAIDJS getVPAIDAd throw an exception "+g)}else f("Unable to load VPAID "+a);d.destroy()};var g='<!DOCTYPE html><html><body style="margin:0px;padding:0px;overflow:hidden"><script type="text/javascript">var script = document.createElement("script");script.onload = function() { window.parent.window["'+this.callbackName+'"](true);};script.onerror = function() { window.parent.window["'+this.callbackName+'"](false);};script.src="'+a+'";document.body.appendChild(script);</script></body></html>';this.creativeContainer.contentWindow.document.write(g),setTimeout(function(){f("Timeout error, creative takes too much time to load")},this.loadTimeout)},c.prototype.getEnvironmentVars=function(a){if(!this.environmentVars){var b={slot:this.creativeContainer.contentWindow.document.body,videoSlot:document.createElement("video"),videoSlotCanAutoPlay:!0};a||(a=b);for(var c in b)a[c]||(a[c]=b);this.environmentVars=a}return this.environmentVars},c.prototype.resize=function(a,b){this.creativeContainer.style.overflow="hidden",this.creativeContainer.style.width=a+"px",this.creativeContainer.style.height=b+"px",this.creativeContainer.setAttribute("width",String(a)),this.creativeContainer.setAttribute("height",String(b))},c.prototype.getType=function(){return 2},c.prototype.registerVPAIDEventHandler=function(b){for(var c in a.VPAIDEvent)this.vpaid.subscribe(this.createVPAIDEventCallback(b,c),c,this)},c.prototype.createVPAIDEventCallback=function(b,c){return function(){for(var d=[],e=0;e<arguments.length;e++)d[e-0]=arguments[e];var f=d[0];switch(c){case a.VPAIDEvent.AdClickThru:f={url:d[0],id:d[1],playerHandles:d[2]}}b({type:c,data:f})}},c}(a.BaseVPAIDContainer);a.VPAIDJSContainer=b}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(a){a.asset={vpaidswfwrapper:"vpaidwrapper.swf"}}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(a){function b(){var a="Shockwave",b="Flash";try{a=new ActiveXObject(a+b+"."+a+b)}catch(c){a=navigator.plugins[a+" "+b]}return!!a}a.hasFlash=b}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(a){var b=function(b){function c(){b.apply(this,arguments)}return __extends(c,b),c.prototype.loadVpaid=function(b,c,d){var e=this;if(!a.hasFlash())return d("Flash plugin is not installed !");var f=!0,g=function(a){f&&(f=!1,e.destroy(),d(a))};this.callbackName="handleVPAIDEvent"+this.id,window[this.callbackName]=function(b){return window[e.callbackName]=function(){},"ready"===b.type?(e.vpaid=e.creativeContainer,f=!1,void c(e.vpaid)):void(b.type===a.VPAIDEvent.AdError&&g(b.data))};var h="vpaid-"+this.id,i=this.config.path+"/"+a.asset.vpaidswfwrapper;this.container.innerHTML='<object data="'+i+'" type="application/x-shockwave-flash" name="'+h+'" id="'+h+'" style="border:0px;width:100%;height:100%;margin:0px;padding:0px" width="100%" height="100%"><param name="id" value="'+h+'" /><param name="name" value="'+h+'" /><param name="movie" value="'+i+'" /><param name="bgcolor" value="#000000" /><param name="quality" value="high" /><param name="allowFullScreen" value="true" /><param name="allowScriptAccess" value="always" /><param name="wmode" value="transparent" /><param name="flashvars" value="debug='+this.config.debug+"&eventHandler="+this.callbackName+"&url="+encodeURIComponent(b)+'" /></object>',this.creativeContainer=document.getElementById(h),setTimeout(function(){g("Timeout error, creative takes too much time to load");
},this.loadTimeout)},c.prototype.destroy=function(){b.prototype.destroy.call(this),window[this.callbackName]=function(){}},c.prototype.registerVPAIDEventHandler=function(a){window[this.callbackName]=a},c.prototype.resize=function(){},c.prototype.getEnvironmentVars=function(a){return{slot:this.creativeContainer,videoSlot:null,videoSlotCanAutoPlay:!0}},c.prototype.getType=function(){return 1},c}(a.BaseVPAIDContainer);a.VPAIDSWFContainer=b}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(a){function b(a){for(var b="",c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",d=0;a>d;d++)b+=c.charAt(Math.floor(Math.random()*c.length));return b}a.genRandomString=b}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(a){function b(a){return Number(a.handshakeVersion("2.0"))>=2}a.isVPAID2=b}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(a){var b=function(){function a(){}return a.prototype.getVPAID=function(){return this},a.prototype.initAd=function(a,b,c,d,e,f){this.vpaidguard("initAd",[a,b,c,d,e,f])},a.prototype.skipAd=function(){this.vpaidguard("skipAd")},a.prototype.resizeAd=function(a,b,c){this.vpaidguard("resizeAd",[a,b,c])},a.prototype.handshakeVersion=function(a){return this.vpaidguard("handshakeVersion",[a])},a.prototype.startAd=function(){this.vpaidguard("startAd",[])},a.prototype.stopAd=function(){this.vpaidguard("stopAd",[])},a.prototype.pauseAd=function(){this.vpaidguard("pauseAd",[])},a.prototype.resumeAd=function(){this.vpaidguard("resumeAd",[])},a.prototype.expandAd=function(){this.vpaidguard("expandAd",[])},a.prototype.collapseAd=function(){this.vpaidguard("collapseAd",[])},a.prototype.getAdLinear=function(){return this.vpaidguard("getAdLinear",[])},a.prototype.getAdWidth=function(){return this.vpaidguard("getAdWidth",[])},a.prototype.getAdHeight=function(){return this.vpaidguard("getAdHeight",[])},a.prototype.getAdExpanded=function(){return this.vpaidguard("getAdExpanded",[])},a.prototype.getAdSkippableState=function(){return this.vpaidguard("getAdSkippableState",[])},a.prototype.getAdRemainingTime=function(){return this.vpaidguard("getAdRemainingTime",[])},a.prototype.getAdDuration=function(){return this.vpaidguard("getAdDuration",[])},a.prototype.getAdVolume=function(){return this.vpaidguard("getAdVolume",[])},a.prototype.getAdCompanions=function(){return this.vpaidguard("getAdCompanions",[])},a.prototype.getAdIcons=function(){return this.vpaidguard("getAdIcons",[])},a.prototype.setAdVolume=function(a){return this.vpaidguard("setAdVolume",[a])},a.prototype.subscribe=function(a,b,c){this.vpaidguard("subscribe",[a,b,c])},a.prototype.unsubscribe=function(a,b){this.vpaidguard("unsubscribe",[a,b])},a.prototype.setVPAID=function(a){this.vpaid=a},a.prototype.vpaidguard=function(a,b){void 0===b&&(b=[]);try{return this.callVPAIDMethod(a,b)}catch(c){}},a.prototype.callVPAIDMethod=function(a,b){return void 0===b&&(b=[]),this.vpaid[a].apply(this.vpaid,b)},a}();a.VPAIDJSGuard=b}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(a){!function(a){a[a.REMOVED=-6]="REMOVED",a[a.REMOVING=-5]="REMOVING",a[a.ERROR=-4]="ERROR",a[a.STOPPED=-3]="STOPPED",a[a.STOPPING=-2]="STOPPING",a[a.SKIPPED=-1]="SKIPPED",a[a.SKIPPING=0]="SKIPPING",a[a.READY=1]="READY",a[a.LOADING=2]="LOADING",a[a.LOADED=3]="LOADED",a[a.STARTING=5]="STARTING",a[a.STARTED=6]="STARTED",a[a.PAUSED=7]="PAUSED",a[a.PLAYING=8]="PLAYING",a[a.COMPLETE=9]="COMPLETE"}(a.VpaidStatus||(a.VpaidStatus={}));a.VpaidStatus}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(a){!function(a){a[a.SWF=1]="SWF",a[a.JS=2]="JS"}(a.CreativeType||(a.CreativeType={}));a.CreativeType}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(a){function b(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];if(window.console)try{console.log.apply(null,a)}catch(c){console.log(a)}}a.log=b}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(a){var b=function(){function b(){this.listeners={},this.listenersScope={}}return b.prototype.subscribe=function(a,b,c){this.listeners[b]=this.listeners[b]||[],this.listeners[b].push(a),this.listenersScope[b]=this.listenersScope[b]||[],this.listenersScope[b].push(c?c:null)},b.prototype.unsubscribe=function(a,b){var c=this.listeners[b],d=c.indexOf(a);c&&d>=0&&(c[d]=function(){})},b.prototype.clearListeners=function(){this.listeners={},this.listenersScope={}},b.prototype.handleEvent=function(b,c){for(var d=this.listeners[b.type]||[],e=0,f=d.length;f>e;e++)try{var g=[b.data];switch(b.type){case a.VPAIDEvent.AdClickThru:g=[b.data.url,b.data.id,b.data.playerHandles]}d[e].apply(this.listenersScope[b.type][e],g)}catch(h){if(c)throw"failed to log error on callback: "+b.data;this.handleEvent({type:a.VPAIDEvent.AdLog,data:"Callback #"+e+" on event "+b.type+" throws an exception: "+h},!0)}},b}();a.EventHandler=b}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(b){var c=function(c){function d(){c.apply(this,arguments),this.status=1,this.type=2,this.eventHandler=new b.EventHandler}return __extends(d,c),d.prototype.initAd=function(d,e,f,g,h,i){var j=this;if(void 0===h&&(h=""),this.status>=2)return void this.dispatchEvent(a.vpaid.VPAIDEvent.AdLog,"Cannot call initAd() twice, VPAID already initalized");this.status=2;var k=5e3;setTimeout(function(){j.status<3&&j.dispatchEvent(b.VPAIDEvent.AdError,"Creative did not initiated after "+k+"ms")},k),c.prototype.initAd.call(this,d,e,f,g,h,i)},d.prototype.startAd=function(){var d=this;if(this.status<3)return void this.dispatchEvent(a.vpaid.VPAIDEvent.AdLog,"VPAID not started, use initAd(), and wait for AdLoaded event before call startAd() method");if(this.status>=5)return void this.dispatchEvent(a.vpaid.VPAIDEvent.AdLog,"cannot call startAd() twice, already started");this.status=5;var e=2e3;setTimeout(function(){d.status<6&&d.dispatchEvent(b.VPAIDEvent.AdError,"Creative did not start after "+e+"ms")},e),c.prototype.startAd.call(this)},d.prototype.stopAd=function(){var a=this;this.status>-2&&(this.status=-2,setTimeout(function(){a.status>-3&&(a.dispatchEvent(b.VPAIDEvent.AdLog,"Creative did not stop after 1s, force stop !"),a.dispatchEvent(b.VPAIDEvent.AdStopped))},1e3),c.prototype.stopAd.call(this))},d.prototype.skipAd=function(){var a=this;this.getAdSkippableState()&&this.status>0&&(this.status=0,setTimeout(function(){a.status>=0&&(a.dispatchEvent(b.VPAIDEvent.AdLog,"Creative did not skip after 1s, force skip !"),a.dispatchEvent(b.VPAIDEvent.AdSkipped),a.stopAd())},1e3),c.prototype.skipAd.call(this))},d.prototype.subscribe=function(a,b,c){this.eventHandler.subscribe(a,b,c)},d.prototype.unsubscribe=function(a,b){this.eventHandler.unsubscribe(a,b)},d.prototype.vpaidguard=function(a,d){void 0===d&&(d=[]);try{if(-6!==this.status)return c.prototype.callVPAIDMethod.call(this,a,d)}catch(e){this.dispatchEvent(b.VPAIDEvent.AdError,"error call "+a+": "+e)}},d.prototype.dispatchEvent=function(a,c){return void 0===c&&(c={}),this.handleVpaidEvent(new b.VPAIDEvent(a,c))},d.prototype.handleVpaidEvent=function(a){if(-6!==this.status){if(this.status>-3)switch(a.type){case b.VPAIDEvent.AdLoaded:this.status=3;break;case b.VPAIDEvent.AdStarted:this.status=6;break;case b.VPAIDEvent.AdVideoStart:case b.VPAIDEvent.AdPlaying:this.status=8;break;case b.VPAIDEvent.AdPaused:this.status=7;break;case b.VPAIDEvent.AdVideoComplete:this.status=9;break;case b.VPAIDEvent.AdSkipped:this.status=-1;break;case b.VPAIDEvent.AdStopped:this.status=-3}this.eventHandler.handleEvent(a),a.type===b.VPAIDEvent.AdError&&this.stopAd()}},d}(b.VPAIDJSGuard);b.BaseVPAIDJSWrapper=c}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(a){var b=function(b){function c(a){var c=this;b.call(this),this.setVPAID(a.getVPAID()),this.type=a.getType(),this.container=a,this.container.registerVPAIDEventHandler(function(a){c.handleVpaidEvent(a)})}return __extends(c,b),c.prototype.initAd=function(a,c,d,e,f,g){this.container.resize(a,c),b.prototype.initAd.call(this,a,c,d,e,f,2===this.type?this.getEnvironmentVars(g):null)},c.prototype.resizeAd=function(a,c,d){this.isResizing=!0,this.container.resize(a,c),b.prototype.resizeAd.call(this,a,c,d)},c.prototype.getEnvironmentVars=function(a){return this.container.getEnvironmentVars(a)},c.prototype.handleVpaidEvent=function(c){var d=this;switch(c.type){case a.VPAIDEvent.AdSizeChange:this.isResizing||this.container.resize(this.getAdWidth(),this.getAdHeight()),this.isResizing=!1}b.prototype.handleVpaidEvent.call(this,c),c.type===a.VPAIDEvent.AdSkipped&&this.stopAd(),-3===this.status&&(this.status=-5,setTimeout(function(){d.status=-6,d.container.destroy()},250))},c}(a.BaseVPAIDJSWrapper);a.VPAIDWrapper=b}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(a){var b=function(b){function c(c){b.call(this,c),this.adDuration=-2,this.lastAdRemainingTime=-1,this.isVpaid2=a.isVPAID2(this.vpaid)}return __extends(c,b),c.prototype.handshakeVersion=function(a){return"2.0"},c.prototype.initAd=function(a,c,d,e,f,g){this.adWidth=a,this.adHeight=c,b.prototype.initAd.call(this,a,c,d,e,f,g)},c.prototype.resizeAd=function(c,d,e){return this.isVpaid2?b.prototype.resizeAd.call(this,c,d,e):(this.adWidth=c,this.adHeight=d,b.prototype.resizeAd.call(this,c,d),void this.dispatchEvent(a.VPAIDEvent.AdSizeChange))},c.prototype.getAdWidth=function(){return this.adWidth},c.prototype.getAdHeight=function(){return this.adHeight},c.prototype.skipAd=function(){this.isVpaid2&&b.prototype.skipAd.call(this)},c.prototype.getAdSkippableState=function(){return this.isVpaid2?b.prototype.getAdSkippableState.call(this):!1},c.prototype.getAdIcons=function(){return this.isVpaid2?b.prototype.getAdIcons.call(this):!1},c.prototype.getAdCompanions=function(){return this.isVpaid2?b.prototype.getAdCompanions.call(this):""},c.prototype.getAdDuration=function(){return this.isVpaid2?b.prototype.getAdDuration.call(this):this.adDuration},c.prototype.handleVpaidEvent=function(c){if(!this.isVpaid2)switch(c.type){case a.VPAIDEvent.AdRemainingTimeChange:this.getAdRemainingTime()>0&&(this.adDuration<=0||this.getAdRemainingTime()>this.adDuration)&&(this.adDuration=this.getAdRemainingTime(),this.dispatchEvent(a.VPAIDEvent.AdDurationChange));break;case a.VPAIDEvent.AdStarted:this.startTimer();break;case a.VPAIDEvent.AdStopped:this.stopTimer()}b.prototype.handleVpaidEvent.call(this,c)},c.prototype.startTimer=function(){var b=this;this.timerId||(this.timerId=setInterval(function(){b.getAdRemainingTime()>=0&&b.lastAdRemainingTime!==b.getAdRemainingTime()&&(b.lastAdRemainingTime=b.getAdRemainingTime(),b.dispatchEvent(a.VPAIDEvent.AdRemainingTimeChange),b.dispatchEvent(a.VPAIDEvent.AdDurationChange))},250))},c.prototype.stopTimer=function(){this.timerId&&clearInterval(this.timerId)},c}(a.VPAIDWrapper);a.VPAID2Over1=b}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(a){var b=function(b){function c(){b.apply(this,arguments)}return __extends(c,b),c.prototype.startAd=function(){this.vpaid.resumeAd()},c.prototype.handleVpaidEvent=function(c,d){if(!this.adStarted&&!d)switch(c.type){case a.VPAIDEvent.AdLoaded:return void this.vpaid.startAd();case a.VPAIDEvent.AdStarted:return this.vpaid.pauseAd(),void this.handleVpaidEvent(new a.VPAIDEvent(a.VPAIDEvent.AdLoaded),!0);case a.VPAIDEvent.AdPlaying:case a.VPAIDEvent.AdVideoStart:this.adStarted=!0,this.dispatchEvent(a.VPAIDEvent.AdStarted);break;default:return}b.prototype.handleVpaidEvent.call(this,c)},c}(a.VPAID2Over1);a.AdManagerWrapper=b}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(a){var b=function(){function b(a,b){if(this.status=0,!a)throw new Error("No ID provided: cannot find the VPAID container element (it must have an ID)");if(this.container=document.getElementById(a),!this.container)throw new Error("Element #"+a+" could not be found in the document: does it exist, and is it attached?");this.config=b}return b.prototype.load=function(b,c,d){var e=this;if(!(this.status>0)){var f,g;b.indexOf(".swf")>0?(this.creativeType=1,g=a.VPAIDSWFContainer):(this.creativeType=2,g=a.VPAIDJSContainer),this.container.innerHTML="",this.status=1;var h=function(b){try{e.status=3,e.wrapper||(e.wrapper=1!==e.creativeType||a.isVPAID2(b)?a.VPAIDWrapper:a.VPAID2Over1);var g=new e.wrapper(f);try{c(g)}catch(h){d("callback success function throw an exception "+h)}}catch(h){d("Loader.load throw an exception "+h)}};f=new g(this.container,this.config),f.loadVpaid(b,h,d)}},b}();a.VPAIDLoader=b}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(a){a.ASSETS={vpaidvideojs:"teads-vpaid-video.min.js",vpaidcanvas:"teads-vpaid-canvas.min.js",vpaidvideoswf:"teads-vpaid-video.swf",vastcorsloader:"cors.swf",vpaidswfwrapper:"vpaidwrapper.swf"}}(b=a.player||(a.player={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(a){var b=function(){function a(){}return a.isBase64=function(a){var b=new RegExp("^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$"),c=b.exec(a);return!!(c&&c.length>0)},a.encode=function(a){return window.btoa?btoa(a):a},a.decode=function(a){return window.atob?atob(a):a},a}();a.Base64Helper=b}(b=a.player||(a.player={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(a){var b=function(){function a(){}return a.canPlayType=function(a){try{return!!document.createElement("video").canPlayType(a).replace(/^no/,"")}catch(b){return!1}},a}();a.VideoHelper=b}(b=a.player||(a.player={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(a){!function(a){a[a.UNSUPPORTED=0]="UNSUPPORTED",a[a.FLASH=1]="FLASH",a[a.JS=2]="JS",a[a.VPAID=3]="VPAID",a[a.CANVAS=4]="CANVAS"}(a.MediaProvider||(a.MediaProvider={}));a.MediaProvider}(b=a.player||(a.player={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(b){b.trackingMapping={click:a.vpaid.VPAIDEvent.AdClickThru,pause:a.vpaid.VPAIDEvent.AdPaused,resume:a.vpaid.VPAIDEvent.AdPlaying,skip:a.vpaid.VPAIDEvent.AdSkipped,creativeView:a.vpaid.VPAIDEvent.AdStarted,start:a.vpaid.VPAIDEvent.AdVideoStart,firstQuartile:a.vpaid.VPAIDEvent.AdVideoFirstQuartile,midpoint:a.vpaid.VPAIDEvent.AdVideoMidpoint,thirdQuartile:a.vpaid.VPAIDEvent.AdVideoThirdQuartile,complete:a.vpaid.VPAIDEvent.AdVideoComplete,impression:a.vpaid.VPAIDEvent.AdImpression,close:a.vpaid.VPAIDEvent.AdUserClose,closeLinear:a.vpaid.VPAIDEvent.AdUserClose,progress:a.vpaid.VPAIDEvent.AdRemainingTimeChange}}(b=a.player||(a.player={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(b){var c=function(){function c(){}return c.sortMediaFilesByMimeType=function(a,b){return b.weight-a.weight},c.weightMediaFile=function(b){return b.weight=0,b.api&&b.api.toLowerCase&&(b.api=b.api.toLowerCase()),b.type&&b.type.toLowerCase&&(b.type=b.type.toLowerCase()),b.delivery&&b.delivery.toLowerCase&&(b.delivery=b.delivery.toLowerCase()),"vpaid"===b.api&&(b.weight+=b.type.indexOf("javascript")>=0?2e3:a.Context.isMobile()?0:1e3),"video/mp4"===b.type?b.weight+=100:"video/x-flv"!==b.type||a.Context.isMobile()||(b.weight+=50),a.Context.isMobile(2)&&(b.weight=0),"video/mpg"===b.type&&a.Utils.getAudioContext()&&(a.Context.isMobile()?a.Context.isMobile(2)&&a.Context.getIosVersion()>=8&&!a.Context.isChromeIos()&&!a.Context.isFacebookWebview()?b.weight+=2e3:a.Context.isAndroid()?a.Context.isAndroidMobile()&&a.Context.getAndroidVersion()>=442?b.weight+=150:b.weight+=50:a.Context.isMobile(3)&&(b.weight+=50):a.Context.isIE()||(b.weight+=75)),("streaming"===b.delivery||0===b.url.indexOf("rtmp://"))&&(b.weight=0),b},c.filterMediaFileByWeight=function(a,b,c){return!!a.weight},c.getMediaProvider=function(c){var d=0;switch(c.type){case"video/x-flv":d=1;break;case"application/x-shockwave-flash":case"application/x-javascript":case"application/javascript":case"text/javascript":d=3;break;case"video/mp4":d=navigator.userAgent.match(/firefox/i)&&a.vpaid.hasFlash()?1:b.VideoHelper.canPlayType(c.type)?2:1;break;case"video/mpg":d=4;break;default:b.VideoHelper.canPlayType(c.type)&&(d=2)}return 1!==d||a.vpaid.hasFlash()||(d=0),d},c.getOptimalMediaFiles=function(a,b){return 0===a.length?null:a=a.map(c.weightMediaFile).filter(c.filterMediaFileByWeight).sort(c.sortMediaFilesByMimeType)},c.getOptimalMediaFile=function(a,b){var d=c.getOptimalMediaFiles(a,b);return d.length?d[0]:null},c.getOptimalHeight=function(a,b){return b?a.height&&a.width?Math.ceil(a.height*(b/a.width)):Math.ceil(b/16*9):0},c.getAssetFromMediaProvider=function(a){var c;switch(a){case 2:c=b.ASSETS.vpaidvideojs;break;case 1:c=b.ASSETS.vpaidvideoswf;break;case 4:c=b.ASSETS.vpaidcanvas;break;default:c=""}return c},c}();b.MediaFileHelper=c}(b=a.player||(a.player={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(b){var c;!function(c){var d=function(){function c(b,c,d,e,f){this.container=b,this.config=c,this.vpaid=d,this.mediaFile=e,this.logger=new a.Logger("player.plugin.Responsive"),this.attributeName="data-responsive"}return c.prototype.init=function(){this.vpaid.subscribe(this.onVpaidStart,a.vpaid.VPAIDEvent.AdStarted,this)},c.prototype.deinit=function(){this.vpaid.unsubscribe(this.onVpaidStart,a.vpaid.VPAIDEvent.AdStarted),this.unsetResponsive()},c.prototype.onVpaidStart=function(){if(!this.config.width)try{this.setResponsive()}catch(a){this.logger.error("Exception raised while trying to initialize",a)}},c.prototype.setResponsive=function(){var c=this,d=this.container.offsetWidth;if(this.container.getAttribute(this.attributeName))return!1;this.vpaid.subscribe(function(){c.unsetResponsive()},a.vpaid.VPAIDEvent.AdError),this.vpaid.subscribe(function(){c.unsetResponsive()},a.vpaid.VPAIDEvent.AdStopped);var e=function(){try{c.container.offsetWidth!==c.vpaid.getAdWidth()&&(d=c.container.offsetWidth,c.vpaid.resizeAd(d,b.MediaFileHelper.getOptimalHeight(c.mediaFile,d),"normal"))}catch(a){c.unsetResponsive()}};e();var f=setInterval(e,1);return this.container.setAttribute(this.attributeName,String(f)),!0},c.prototype.unsetResponsive=function(){try{var a=Number(this.container.getAttribute(this.attributeName));return a?(clearInterval(a),this.container.removeAttribute(this.attributeName),!0):!1}catch(b){return!1}},c}();c.Responsive=d}(c=b.plugin||(b.plugin={}))}(b=a.player||(a.player={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(b){var c;!function(b){var c=function(){function b(a,b,c,d,e){this.vpaid=c}return b.prototype.init=function(){this.vpaid.subscribe(this.onClickThrough,a.vpaid.VPAIDEvent.AdClickThru,this)},b.prototype.deinit=function(){this.vpaid.unsubscribe(this.onClickThrough,a.vpaid.VPAIDEvent.AdClickThru)},b.prototype.onClickThrough=function(a,b,c){c&&a&&window.open(a)},b}();b.ClickThrough=c}(c=b.plugin||(b.plugin={}))}(b=a.player||(a.player={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(a){var b=function(){function a(a,b,c,d,e,f){void 0===b&&(b=[]),void 0===c&&(c=[]),void 0===d&&(d=!1),void 0===e&&(e=!0),void 0===f&&(f=[]),this.name=a,this.before=b,this.after=c,this.multiple=d,this.metadata=e,this.resources=f,this.tracked=[],"progress"===a&&(this.multiple=!0)}return a.prototype.getName=function(){return this.name},a.prototype.getBefore=function(){return this.before},a.prototype.getAfter=function(){return this.after},a.prototype.isMultiple=function(){return this.multiple},a.prototype.isMetadata=function(){return this.metadata},a.prototype.getResources=function(a){return this.resources.filter(function(b){return!(b.offset>0)||a>=0&&b.offset>=0&&a>=b.offset&&!b.fired})},a.prototype.getAllResources=function(){return this.resources},a.prototype.removeResources=function(){this.resources=[]},a.prototype.hasResources=function(){return this.resources.length>0},a.prototype.addResource=function(a,b){this.resources.push({url:a,offset:b})},a.prototype.setTracked=function(){this.eventIsTracked=!0},a.prototype.isTracked=function(){return this.eventIsTracked},a.prototype.addTracked=function(a,b){this.tracked.push({time:b,url:a})},a.prototype.getTracked=function(){return this.tracked},a.prototype.isTrackable=function(){return!this.eventIsTracked||this.isMultiple()},a}();a.Tracking=b}(b=a.tracker||(a.tracker={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(b){var c=function(){function b(b,c,d){if(void 0===d&&(d=!0),this.key=b,this.value=c,this.multiple=d,this.logger=new a.Logger("tracker.Metadata"),!b)throw new Error("Metadata key is mandatory")}return b.prototype.isMultiple=function(){return this.multiple},b.prototype.getKey=function(){return this.key},b.prototype.getValue=function(){var a=this.value;if("function"==typeof a)try{return String(a()||"")}catch(b){return this.logger.warn("getValue: error while trying to execute value function:",b),""}return String(a||"")},b.prototype.getUrlPiece=function(){return encodeURIComponent(this.getKey())+"="+encodeURIComponent(this.getValue())},b}();b.Metadata=c}(b=a.tracker||(a.tracker={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(a){var b=function(){function a(){}return a.vast=[{name:"error"},{name:"fullscreen",multiple:!0},{name:"click",multiple:!0},{name:"creativeView"},{name:"impression"},{name:"start"},{name:"firstQuartile"},{name:"midpoint"},{name:"thirdQuartile"},{name:"complete"},{name:"pause",before:["start"],multiple:!0},{name:"resume",before:["pause"],multiple:!0},{name:"mute",multiple:!0},{name:"unmute",multiple:!0},{name:"expand",multiple:!0},{name:"collapse",multiple:!0},{name:"rewind",multiple:!0},{name:"skip"},{name:"close"},{name:"progress",multiple:!0,before:["start"]}],a}();a.Config=b}(b=a.tracker||(a.tracker={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(b){var c=function(){function c(c){this.logger=new a.Logger("tracker.Tracker"),this.trackings={},this.metadatas=[],this.errors=[],this.errorUrls=[],c instanceof Array?this.setTrackings(c):this.setTrackings(b.Config.vast),this.logger.info("new",this)}return c.prototype.setTrackings=function(a){return a instanceof Array?void a.forEach(function(a){this.setTracking(a)},this):void this.logger.error("setTrackings param error, expected array.",a)},c.prototype.setTracking=function(a){return a.name?void(this.trackings[a.name]=new b.Tracking(a.name,a.before,a.after,a.multiple,a.metadata,a.resources)):void this.logger.error("Name of tracking is needed",a)},c.prototype.getTracking=function(a){return this.trackings[a]},c.prototype.getTrackedEvents=function(){var a,b=[];for(var c in this.trackings)this.trackings.hasOwnProperty(c)&&(a=this.trackings[c],a.isTracked()&&b.push(a));return b},c.prototype.addResource=function(b,c,d){if(!a.Utils.isURLMacro(c))return this.logger.error("URL format",c),!1;if("progress"===b&&!d)return this.logger.error('Adding a "progress" tracking requires an associated offset',c),!1;var e=this.getTracking(b);if(e){var f=e.getAllResources();if(f.length){var g=!1;if(f.forEach(function(a){g||(g=c===a.url)}),g)return this.logger.warn("URL already exists"),!1}return e.addResource(c,d),!0}return this.logger.error("This event ("+b+") does not exist in config"),!1},c.prototype.addResources=function(a){return a instanceof Array?(a.forEach(function(a){a.resources.forEach(function(b){this.addResource(a.event,b.url,b.offset)},this)},this),!0):!1},c.prototype.isTrackable=function(a){var b=this.getTracking(a);if(!b)return this.trackError(a,"This event ("+a+") does not exist in config"),!1;if(!b.isTrackable())return!1;if(!b.hasResources())return!0;if(b){var c=!0,d=!0,e=b.getBefore(),f=b.getAfter();return e.length&&(c=e.some(function(a){var b=this.getTracking(a),c=b&&!b.isTrackable(),d=b&&b.isTracked();return d||c||!b},this),c||this.trackError(a,"Previous event ["+b.getBefore().join(",")+"] was not tracked")),f.length&&(d=f.some(function(a){var b=this.getTracking(a),c=b&&b.isTrackable(),d=b&&!b.isTracked();return d||c||!b},this),d||this.trackError(a,"Next event ["+b.getAfter().join(",")+"] are already tracked")),c&&d}},c.prototype.track=function(a,b,c){void 0===b&&(b={});var d=this.getTracking(a);return this.isTrackable(a)?"progress"!==a||null!==c&&!isNaN(c)?(d.getResources(c).forEach(function(e){var f=e.url;d&&d.isMetadata()&&(f=this.processMetadata(f));for(var g in b)b.hasOwnProperty(g)&&(f=f.replace(g,b[g]));var h=new Image;h.src=f,e.fired=!0,this.logger.info("Track ["+a+(c?"@"+c.toFixed(2)+"s":"")+"]: ",f),d.addTracked(f,c),this.callback(a,!0)},this),d.setTracked(),!0):(this.trackError(a,"This event ("+a+") needs the current progress time (in seconds)"),!1):(this.logger.warn("This event ("+a+") is not trackable"),!1)},c.prototype.setMetadata=function(a,c,d){if(void 0===d&&(d=!0),"string"!=typeof a||!a)return this.logger.warn("setMetadata: key is mandatory (string).",a),!1;if("string"!=typeof c&&"function"!=typeof c)return this.logger.warn("setMetadata: value: String or Function expected.",c),!1;if("boolean"!=typeof d)return this.logger.warn("setMetadata: multiple: Boolean expected.",d),!1;var e=new b.Metadata(a,c,d);return e?(this.metadatas.push(e),!0):!1},c.prototype.processMetadata=function(a){for(var b,c,d=this.metadatas.length-1;d>=0;d--)b=this.metadatas[d],c=b.getKey(),0===c.indexOf("[")?a=a.replace(c,b.getValue()):a+=(a.indexOf("?")>=0?"&":"?")+b.getUrlPiece(),b.isMultiple()||this.metadatas.splice(d,1);return a},c.prototype.getTrackingsInfo=function(){var a,b={};for(var c in this.trackings)this.trackings.hasOwnProperty(c)&&(a=this.trackings[c],a.getTracked().forEach(function(c,d){var e=new Date(c.time);b[a.getName()+"-"+d]={event:a.getName(),url:c.url,time:e.toTimeString().substr(0,8)+"."+e.getMilliseconds()}}));this.logger.table(b),this.logger.table(this.errors)},c.prototype.setTrackingError=function(b){return a.Utils.isURLMacro(b)?void this.errorUrls.push(b):(this.logger.error("setTrackingError: wrong URL format",b),!1)},c.prototype.trackError=function(a,b){this.logger.warn("Track errors:",a,b),this.callback(a,"false");var c=new Date;this.errors.push({event:a,message:b,time:c.getHours()+":"+c.getMinutes()+":"+c.getSeconds()+"."+c.getMilliseconds()}),this.errorUrls.forEach(function(c){c+="&event="+encodeURIComponent(a),c+="&message="+encodeURIComponent(b);var d=new Image;d.src=this.formatUrl(c)})},c.prototype.callback=function(a,b){if("function"==typeof this.handler)try{this.handler(a,b)}catch(c){this.logger.error("Callback error ("+a+"):",c)}},c.prototype.setCallback=function(a){"function"==typeof a&&(this.handler=a)},c}();b.Tracker=c}(b=a.tracker||(a.tracker={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(b){var c;!function(c){var d=function(){function c(b,c,d,e,f){this.vpaid=d,this.mediaFile=e,this.linearAd=f,this.logger=new a.Logger("player.plugin.Tracker")}return c.prototype.init=function(){var c=this;this.logger.debug("init Tracker");try{this.tracker=new a.tracker.Tracker;var d=function(b,d){var e=c.vpaid.getAdDuration()-c.vpaid.getAdRemainingTime()||0,f={"[CONTENTPLAYHEAD]":a.Utils.offset(e),"[CACHEBUSTING]":a.Utils.rand(8),"[ERRORCODE]":"","[ASSETURI]":String(c.mediaFile.url)};switch(d){case a.vpaid.VPAIDEvent.AdError:f["[ERRORCODE]"]="901"}c.tracker.track(b,f,e)},e=function(a){c.vpaid.subscribe(function(){d(a,b.trackingMapping[a])},b.trackingMapping[a])};for(var f in this.linearAd.tracking){var g=this.linearAd.tracking[f];g&&(g.forEach(function(a,b,d){c.tracker.addResource(f,a.url,a.data)},this),e(f))}var h=!this.vpaid.getAdVolume(),i=function(){h&&c.vpaid.getAdVolume()>0?d("unmute",a.vpaid.VPAIDEvent.AdVolumeChange):h||0!==c.vpaid.getAdVolume()||d("mute",a.vpaid.VPAIDEvent.AdVolumeChange),h=!c.vpaid.getAdVolume()},j=function(){h=!c.vpaid.getAdVolume()};this.vpaid.subscribe(j,a.vpaid.VPAIDEvent.AdLoaded),this.vpaid.subscribe(j,a.vpaid.VPAIDEvent.AdStarted),this.vpaid.subscribe(i,a.vpaid.VPAIDEvent.AdVolumeChange)}catch(k){this.logger.error("Tracker threw an exception:",k)}},c.prototype.deinit=function(){this.logger.debug("deinit Tracker")},c.prototype.removeResources=function(a){try{this.tracker.getTracking(a).removeResources()}catch(b){this.logger.error("Remove tracking resources for event "+a+" throw an exception",b)}},c}();c.Tracker=d}(c=b.plugin||(b.plugin={}))}(b=a.player||(a.player={}))}(teads||(teads={})),window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}();try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(b){var c;!function(b){var c;!function(a){a[a.MIN=0]="MIN",a[a.MAX=1]="MAX",a[a.MOY=2]="MOY"}(c||(c={}));var d=function(){function b(b,c,d,e,f){this.container=b,this.config=c,this.vpaid=d,this.mediaFile=e,this.benchFps={},this.totalFps=0,this.currentTime=0,this.stalledCount=0,this.logger=new a.Logger("teads.player.plugin.Bench"),this.enable=a.Context.isMobile()&&!!(Math.random()<=.1)}return b.prototype.init=function(){this.enable&&(this.bindEvent(),a.LogSender.enable=!0)},b.prototype.deinit=function(){this.enable&&(this.vpaid.unsubscribe(this.benchEnd,a.vpaid.VPAIDEvent.AdStopped),clearInterval(this.interBench),this.interBench=null)},b.prototype.bindEvent=function(){var b=this,c=this.container.getElementsByTagName("video")?this.container.getElementsByTagName("video")[0]:null;c&&c.addEventListener("waiting",function(){return b.stalledCount++}),this.vpaid.subscribe(this.benchStart,a.vpaid.VPAIDEvent.AdStarted,this),this.vpaid.subscribe(this.benchEnd,a.vpaid.VPAIDEvent.AdStopped,this),this.vpaid.subscribe(this.benchEnd,a.vpaid.VPAIDEvent.AdError,this)},b.prototype.benchStart=function(){var a=this;this.startTime=Date.now(),this.interBench=setInterval(function(){return a.fillBench()},1e3),window.requestAnimFrame(function(){return a.loopRequestAnimFrame()}),this.timeout=setTimeout(function(){return a.benchEnd()},6e4)},b.prototype.benchEnd=function(){var b=this;clearTimeout(this.timeout),this.timeout=null;var c=document.createElement("script");c.src="//wurfl.io/wurfl.js",c.onload=function(){var c=b.createBenchData();if(window.teadsCanvasPlayerBench)for(var d in window.teadsCanvasPlayerBench)c[d]=window.teadsCanvasPlayerBench[d];b.logger.info(c),a.LogSender.logEntries(c)},document.body.appendChild(c)},b.prototype.createBenchData=function(){return{benchDuration:(Date.now()-this.startTime)/1e3,videoDuration:this.vpaid.getAdDuration(),
video:this.mediaFile.url,bitrate:this.mediaFile.bitrate||0,deviceMinFps:this.getFps(0),deviceMaxFps:this.getFps(1),deviceMoyFps:this.getFps(2),ua:window.navigator.userAgent,href:window.location.href,date:(new Date).toLocaleString(),wurfl:window.WURFL,stalledCount:this.stalledCount,playerPackage:{name:"teads-player",version:"0.2.48"}}},b.prototype.getFps=function(a){var b,c=0,d=0;for(var e in this.benchFps)if(b)switch(a){case 0:b=this.benchFps[e]<b.value?{value:this.benchFps[e],when:e}:b;break;case 1:b=this.benchFps[e]>b.value?{value:this.benchFps[e],when:e}:b;break;case 2:c+=this.benchFps[e],d++,b={value:c/d}}else b={value:this.benchFps[e],when:e};return b},b.prototype.loopRequestAnimFrame=function(){var a=this;this.totalFps++,window.requestAnimFrame(function(){return a.loopRequestAnimFrame()})},b.prototype.fillBench=function(){this.benchFps[this.currentTime+"-"+ ++this.currentTime+"sec"]=this.totalFps,this.totalFps=0},b}();b.Bench=d}(c=b.plugin||(b.plugin={}))}(b=a.player||(a.player={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(a){a.availablePlugins=["Responsive","Tracker","ClickThrough","Bench"]}(b=a.player||(a.player={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(b){var c=function(){function c(b,c){this.container=b,this.config=c,this.logger=new a.Logger("player.VASTPlayer"),this.plugins=[],this.logger.info("new",this),this.vastLib=new a.vast.VASTLib({assetsUrl:this.config.path})}return c.prototype.loadVast=function(a,b,c){var d=this,e=function(a){d.linearAd=a,b(d.linearAd)};this.vastLib.load(a,e,c)},c.prototype.parseVast=function(a,b,c){var d=this,e=function(a){d.linearAd=a,b(d.linearAd)};this.vastLib.parse(a,e,c)},c.prototype.playOptimalMediaFile=function(a,c,d){this.playMediaFile(b.MediaFileHelper.getOptimalMediaFile(this.linearAd.mediaFiles,a),c,d)},c.prototype.loadOptimalMediaFile=function(a,c){this.loadMediaFile(b.MediaFileHelper.getOptimalMediaFile(this.linearAd.mediaFiles,this.linearAd.adParameters),a,c)},c.prototype.playMediaFile=function(b,c,d){if(!b){var e="no valid media file found in VAST file for this context";return d(e),void this.logger.error({msg:e,ua:navigator.userAgent,mediafiles:this.linearAd.mediaFiles})}var f=function(b,d){c(b,d),b.subscribe(function(){b.startAd()},a.vpaid.VPAIDEvent.AdLoaded),b.initAd(d.width,d.height,d.mode,d.bitrate,d.parameters)};this.loadMediaFile(b,f,d)},c.prototype.loadMediaFile=function(c,d,e){var f=this;if(!c){var g="no valid media file found in VAST file for this context";return e(g),void this.logger.error({msg:g,ua:navigator.userAgent,mediafiles:this.linearAd.mediaFiles})}var h=b.MediaFileHelper.getMediaProvider(c),i=c.url,j=this.config.width?this.config.width:this.container.offsetWidth,k={width:j,height:this.config.height?this.config.height:b.MediaFileHelper.getOptimalHeight(c,j),mode:"normal",bitrate:c.bitrate||512,parameters:this.linearAd.adParameters};switch(h){case 0:return void e("unsupported media file");case 1:case 2:case 4:i=this.config.path+"/"+b.MediaFileHelper.getAssetFromMediaProvider(h);var l="../dist"!==this.config.path&&0!==this.config.path.indexOf("http")?window.location.protocol+this.config.path:this.config.path,m=this.linearAd.clickThrough.length?this.linearAd.clickThrough[0]:null;k.parameters={url:c.url,keepRatio:!0,debug:this.config.debug,clickThrough:m,skippable:this.linearAd.skippable,skipoffset:this.linearAd.skipDelay,assetsPath:l},1===h&&(k.parameters=JSON.stringify(k.parameters))}this.container.innerHTML="";var n={path:this.config.path,debug:this.config.debug},o=new a.vpaid.VPAIDLoader(this.container.id,n),p=function(a){try{if(f.vpaid=a,f.mediafile=c,3===h&&2===o.creativeType&&k.parameters&&"string"==typeof k.parameters){b.Base64Helper.isBase64(k.parameters)?k.parameters=b.Base64Helper.decode(k.parameters):k.parameters=decodeURIComponent(k.parameters);try{k.parameters=JSON.parse(k.parameters)}catch(g){return void e("Error decoding initAd parameters for JS creative "+g)}}for(var i=0;i<b.availablePlugins.length;i++){var j=b.availablePlugins[i];try{var l=b.plugin[j];f.plugins[j]&&f.plugins[j].deinit(),f.plugins[j]=new l(f.container,f.config,a,c,f.linearAd),f.plugins[j].init()}catch(g){f.logger.error("Could not initialize plugin "+j,g)}}d(a,k)}catch(g){e(g)}};o.load(i,p,e)},c.prototype.getPlugin=function(a){return this.plugins[a]},c}();b.VASTPlayer=c}(b=a.player||(a.player={}))}(teads||(teads={})),window.teads=window.teads||{},__extends(window.teads,teads)}();